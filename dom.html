<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Задания</title>
<!-- Подключение Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
<style>
  /* Дополнительные стили для блоков */
  .box {
    width: 100px;
    height: 100px;
    background-color: lightblue;
    margin: 5px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
  }
  #elementsContainer {
    margin-top: 20px;
  }
</style>
</head>
<body class="p-3">

<h2>Работа с BOM</h2>
<button id="showSizeBtn" class="btn btn-primary mb-3">Показать размеры окна</button>

<h3>Управление историей</h3>
<button id="backBtn" class="btn btn-secondary">Назад</button>
<button id="forwardBtn" class="btn btn-secondary">Вперед</button>

<hr/>

<h2>Динамическое управление элементами</h2>
<div>
  <button id="addElementBtn" class="btn btn-success">Добавить элемент</button>
  <button id="removeElementBtn" class="btn btn-danger">Удалить элемент</button>
  <button id="cloneElementBtn" class="btn btn-warning">Клонировать элемент</button>
</div>
<div id="elementsContainer"></div>

<hr/>

<h2>Статьи</h2>
<div class="mb-3">
  <button id="addArticleBtn" class="btn btn-primary">Добавить статью</button>
</div>
<div id="articlesContainer" class="list-group"></div>

<script>
// --- Задание 1: Определение размера окна ---
const showSizeBtn = document.getElementById('showSizeBtn');

function reportWindowSize() {
  alert(`Ширина: ${window.innerWidth}px, Высота: ${window.innerHeight}px`);
}

// Обработчик изменения размеров окна
window.addEventListener('resize', reportWindowSize);

// Кнопка для показа текущего размера
showSizeBtn.addEventListener('click', reportWindowSize);

// --- Задание 2: Управление элементами ---
const container = document.getElementById('elementsContainer');
const addBtn = document.getElementById('addElementBtn');
const removeBtn = document.getElementById('removeElementBtn');
const cloneBtn = document.getElementById('cloneElementBtn');

let elementCount = 0;

addBtn.onclick = () => {
  elementCount++;
  const div = document.createElement('div');
  div.className = 'box';
  div.textContent = elementCount;
  container.appendChild(div);
};

removeBtn.onclick = () => {
  if (container.lastChild) {
    container.removeChild(container.lastChild);
    elementCount--;
  }
};

cloneBtn.onclick = () => {
  const last = container.lastChild;
  if (last) {
    const clone = last.cloneNode(true);
    // Обновляем номер
    elementCount++;
    clone.textContent = elementCount;
    container.appendChild(clone);
  }
};

// --- Задание 3: Работа со статьями ---
const articlesContainer = document.getElementById('articlesContainer');
const addArticleBtn = document.getElementById('addArticleBtn');

let articles = JSON.parse(localStorage.getItem('articles')) || [
  { title: 'Заголовок статьи 1', content: 'Содержание статьи 1' },
  { title: 'Заголовок статьи 2', content: 'Содержание статьи 2' }
];

function renderArticles() {
  articlesContainer.innerHTML = '';
  articles.forEach((article, index) => {
    const articleDiv = document.createElement('div');
    articleDiv.className = 'list-group-item list-group-item-action flex-column align-items-start';

    // Заголовок
    const header = document.createElement('h2');
    header.className = 'mb-1';
    header.textContent = article.title;

    // Текст
    const paragraph = document.createElement('p');
    paragraph.className = 'mb-1';
    paragraph.textContent = article.content;

    // Кнопки
    const btnGroup = document.createElement('div');

    const deleteBtn = document.createElement('button');
    deleteBtn.className = 'btn btn-danger btn-sm me-2';
    deleteBtn.textContent = 'Удалить';
    deleteBtn.onclick = () => {
      articles.splice(index,1);
      saveArticles();
      renderArticles();
    };

    const editBtn = document.createElement('button');
    editBtn.className = 'btn btn-secondary btn-sm';
    editBtn.textContent = 'Редактировать';
    editBtn.onclick = () => {
      const newTitle = prompt('Введите новый заголовок', article.title);
      if (newTitle !== null) {
        const newContent = prompt('Введите новый текст', article.content);
        if (newContent !== null) {
          articles[index] = { title: newTitle, content: newContent };
          saveArticles();
          renderArticles();
        }
      }
    };

    btnGroup.appendChild(deleteBtn);
    btnGroup.appendChild(editBtn);

    articleDiv.appendChild(header);
    articleDiv.appendChild(paragraph);
    articleDiv.appendChild(btnGroup);

    articlesContainer.appendChild(articleDiv);
  });
}

function saveArticles() {
  localStorage.setItem('articles', JSON.stringify(articles));
}

document.getElementById('addArticleBtn').onclick = () => {
  articles.push({ title: 'Новая статья', content: 'Введите содержание статьи...' });
  saveArticles();
  renderArticles();
};

// Изначальное отображение
renderArticles();

// --- Работа с историей ---
const backBtn = document.getElementById('backBtn');
const forwardBtn = document.getElementById('forwardBtn');

backBtn.onclick = () => {
  history.back();
};
forwardBtn.onclick = () => {
  history.forward();
};

// --- Предупреждение о закрытии страницы ---
window.onbeforeunload = function() {
  return 'Вы уверены, что хотите покинуть страницу?';
};
</script>
</body>
</html>